## MAIBENBEN x568 
Приобрел недавно этот ноутбук. 
У меня модель в которой стоит Nvidia 3060 (я не особо в игры играю, думаю мне хватит), 16 Gb памяти и 512 NVME SSD.
Хочу привести несколько ссылок и информации для таких "сумасшедших и красноглазых" которые пытаются его заставить работать в linux.

### минусы
Конечно есть и минусы, про них уже было из разных источников, что собственнно не понравилось мне:
1. клавиатура - она оптомеханическая и к ней нужно привыкнуть, для меня необычным показалось прежде всего очень длинный ход клавиш, что сильно отличается от клавиатур современных ноутбуков. Cтоит также обратить внимание, что клавиатура шумная и клавиша пробела дребезжит стабилизаторами
2. греется иногда довольно серьезно, учитывая что я им пользуюсь часто держа "на пузе" - это неприятно.
Нагревается в основном снизу. Cтранно вообще как-то нагревается - например "кипит" если находтся в bios и ничего не делает, но при
этом довольно холодный при пересборке ядра linux (на частотах процессора 3.1-3.5 Ghz)
Надо сказать, что при этом троттлинга прям какого-то я вроде не заметил.
3. довольно увесистый, при этом и он сам и его блок питания на 120W
4. говорят, что посредственные динамики - но мне норм :)
5. клавиши без русских букв! в комплекте набор наклеек, которые я пока решил не клеить. 
	Мне к этому не привыкать, я 4 года таскался с macbook pro американским - и печатаю по русски вслепую.
6. запитать через порт thunderbolt ноутбук не получиться - только через стандартный порт питания 

### плюсы
1. правильная платформа, разработанная intel
2. приличное наполнение: 
	- сравнительно новый (на момент июня 2022) и мощный процессор intel i7 11800H 11-го поколения:
	  8-ядерный 16-ти потоковый, частота на 1.9-2.3 ГГц, 10-nm технология, т.е. сравнительно "холодный"
	- довольно новая дискретная карта Nvidia RTX 3060 - не самая топовая, но приличная рабочая лошадка
	- 16 gb RAM (ниже будет какая установлена)
	- 512Gb NVME 
	- Intel® Wi-Fi 6 AX201 wifi карта
	- Довольно "толстая" батарея на  93Wh Она конечно добавляет тяжести, но вполне свободно позволяет работать без электричества часа 4 на офисных 		задачах. точнее не замерял - не вижу в этом необходимости т.к. использую его в основном дома.
	- экран 15.6 16:9, 2560 x 1440 165 Hz
3. Расширяемый:
	- приличное кол-во внешних портов:
	  ethernet, 3 x USB3.0, 1 x thunderbolt 4, HDMI, SD card reader, audio совмещенный наушники/микрофон
	- внутри два честных разьема для RAM (SO-DIMM,DDR4,3200Mhz, до 64Gb)!
	- внутри два честных разьема для M2 карт !
	- то, что память и M2 не запаяны - тоже довольно большая редкость среди современных (к сожалению)
3. цена - за эти деньги "просто топчик" :)


### про модель
Модель ноутбука Maibenben 568 - использует OEM платформу [tongfang](https://www.hk.tongfangpc.com/) / [uniwill](https://www.uniwill.com.tw/)
(непонятно, кто из них более правильный, но по видимому это синонимы - уж больно у них похожие сайты)
эти OEM производители в свою очередь использую платформу (laptop kit) от intel:
intel nuc x15, модель [LAPKC71E](https://ark.intel.com/content/www/ru/ru/ark/products/198135/intel-nuc-x15-laptop-kit-lapkc71e.html) (это именно модель с Nvidia 3060)
Есть совершенно аналогичная модель,но с Nvidia 3070, [LAPKC71F](https://ark.intel.com/content/www/ru/ru/ark/products/198152/intel-nuc-x15-laptop-kit-lapkc71f.html)

### под какими марками и кто продает
данная oem платформа используется у многих производителей, их обьединяет только одно - сравнительная неизвестность:
- "американский" ADATA XPG Xenia 15
- "бразильский" AVELL (не нашел точной модели, только упоминание на reddit)
- "немецкий" TUXEDO Stellaris 15 gen 3
- китайские maibenben, mechrevo
- и т.д.
Впрочем главный вывод тут - чем больше их продается - тем легче получить по ним информацию!

### вскрытие 
Вскрыл - отлично кстати открывается, винтики(крестовые) все остаются в крышке и не потеряются, гребаных защелок нигде нет - прям thinkpad для бедных!
Внутри в общем все аккуратно. Доставил еще один SSD(для чего и вскрывал) - в пустом слоте с M2 даже присутствовал винтик для крепежа! 
Копеечная мелочь, а ведь как-то приятно - вечно эти винтики ищешь где взять.
Внутри моего стояла только одна планка SO-DIMM 16Gb 3200 Mhz Crucial памяти
(что в общем хорошо, т.к. легко можно добавить например еще одну планку), но одна планка = только 1 канал памяти! 
Установленный диск - NVME Western Digital SN540 - в общем довольно скромненький по параметрам (но хотя-бы не "левый" производитель)
https://www.westerndigital.com/ru-ru/products/internal-drives/pc-sn540-ssd#SDDPNPF-512G 

### ссылка на подробный обзор
если нужны картинки и красивые графики, то есть довольно подробный обзор(правда тут модель с 3070 и другой памятью и диском)
https://www.notebookcheck.net/ADATA-XPG-Xenia-15-laptop-review-Almost-as-sharp-as-a-Razer-Blade.572311.0.html

### о "maibenben"
Название maibenben нигде в диагностике не фигурирует, везде производитель - intel. так что буквы "maibenben" - только на шильдике крышки
экрана. даже заставка bios - Intel NUC

### выбор OS
Покупал целенаправленно с linux - ибо буду в основном именно с ним использовать (ну и экономия опять-же)
"из коробки" был установлен ubuntu - c очень странной разбивкой диска - под linux было отведено всего 40 Gb, остальное место было в разделе
отформатированном под NTFS
В общем я этот ubuntu снес, попробовал поставить pop os - эта операционка на нем не заводится (пробовал с проприетарным драйвером nvidia, думаю из-за него), не стал разбираться из-за чего, пока поставил manjaro(но это как говориться, на любителя). Просто будьте готовы помучиться с nvidia.

### обновление BIOS
Скачиваются с [сайта intel](https://www.intel.ru/content/www/ru/ru/download/648490/bios-update-kctgl357-for-the-intel-nuc-x15-laptop-kits-lapkc71f-lapkc71e-lapkc51e.html) 
Если у вас не windows - качаем "Обновление BIOS С7 Файл .CAP", записываем на usb flash (лучше с fat16), перезагружаем ноутбук и при старте BIOS жмем клавишу F7, выбираем .cap файл. далее ждем перезагрузки.

### своя заставка(logo) при старте BIOS
Попутно с обновлением bios на [сайте intel](https://www.intel.ru/content/www/ru/ru/download/19504/intel-aptio-v-uefi-firmware-integrator-tools.html)
можно скачать средства для кастомизации. Не буду ничего советовать по использованию этих утилит - потенциально они довольно опасны. Остановлюсь только на
программке iChLogo: эта утилита позволяет заменить заставку на свою картинку. У intel в архиве выложена версии под windows и под linux.
Сначала подготавливаем свою картинку-заставку, она должна быть:
- в формате .BMP,.JPEG или .PNG
- размером не более 800x600
- 16 цветов, 256 цветов and 24bit цвета для .BMP или 8-битных оттенка серого либо не более 16 бит цвета RGB для .PNG - подробности в readme приложенном к утилите
- максимального размера - 256kb
Далее нужен образ обновления BIOS (.cap файл) из предыдущего пункта.
Сохраняем на всякий случай старое лого (в основном, чтобы сравнить формат: 
```
./iChLogoLnx64 /i <файл_прошивки_bios.cap> /e logo
```
В результате в получаем файл со старой заставкой logo.jpg
```
$ file logo.jpg
 logo.jpg: JPEG image data, JFIF standard 1.02, aspect ratio, density 100x100, segment length 16, baseline, precision 8, 600x360, components 3
```
проверяем, что наше новое лого подходит:
```
./iChLogoLnx64 /i KC0040.CAP /t logo_new.png 

 +--------------------------------------------------------------------------+
 |                        iChLogo 5.15.0044                                 |
 |              Copyright (c) 2021 AMI. All rights reserved.                |
 +--------------------------------------------------------------------------+
 
 Logo [logo_new.png] will fit into the image [KC0040.CAP].
```

Далее создаем кастомизированную прошивку:
```
$ ./iChLogoLnx64 /i <файл_прошивки_bios.cap> /o <новый_файл_прошивки_bios.cap> /r logo_new.png
```
В результате получаем кастомизированную прошивку, которую перешиваем штатным образом.

### драйвера под windows
на [сайте maibenben](http://ru_support.maibenben.cn/drives/47&series_id=30) можно скачать пакет драйверов для этого ноутбука - но тут нужно запастись терпением - качается 2.1Gb из китая очень не быстро!
на [сайте intel](https://www.intel.ru/content/www/ru/ru/download/649904/intel-nuc-x15-laptop-kit-lapkcx1x-driver-pack.html) можно скачать более новые драйвера и быстрее :)

### поддержка linux
Надо сказать, что в репозиториях manjaro и в AUR я нашел практически все нижеописанные программки - в других дистрибутивах придется подключать доп репозитории или скачивать и собирать программы с  github. 
Из всех продавцов клонов этой модели только [tuxedocomputers](https://www.tuxedocomputers.com/) имеют правильную команду поддержки и пытаются что-то дописать для linux.
На их сайте довольно много информации по linux на их ноутбуках, они даже свою версию ubuntu настрогали - tuxedo OS, но у них несколько "закрытая техподдержка": требуется регистрация, информация на их сайте в основном на немецком, .iso для tuxedo OS не выкладывают, обновление bios/драйверов тоже... 
Зато у них есть профиль на [github: https://github.com/tuxedocomputers/](https://github.com/tuxedocomputers/) - ну и соответственно стоит обратить внимание на три проекта от них:

[tuxedo-control-center](https://github.com/tuxedocomputers/tuxedo-control-center) - позволяет управлять подсистемой powersafe ноутбука,
На страничке проекта есть ссылка, как подключить уже готовые бинарные репозитории для debian, ubuntu, opensuse. 
выводит красивые градусники показывающие нагрев, частоту процессора и прочая

Далее стоит попробовать поставить:
[tuxedo-keyboard](https://github.com/tuxedocomputers/tuxedo-keyboard) - драйвера для поддержки управления подсветкой клавиатуры в виде DKMS модуле для ядра linux
Признаюсь честно, у меня эта штука завелась частично - например после установки клавиша подсветки клавиатуры(F8) наоборот не работает :)
Зато начинают работать клавиши отключения touchpad (об этом ниже), переключатель режима самолета(отключение беспроводных сетей) и по кнопке,которая рядом с кнопкой питания будет вызываться tuxedo-control-center из трея. 

Еще один проект от tuxedocomputers:
[tuxedo-touchpad-switch](https://github.com/tuxedocomputers/tuxedo-touchpad-switch)
это userspace маленький демон, который позволяет отключать/включать по клавише(F7) или по двойному щелчку на led(левый верхний угол) touchpad. Этой программке обязательно нужны загруженные модули tuxedo-keyboard. Без модулей не работает!

### подсветка клавиатуры
Подсветка клавиатуры в этом ноутбуке базируется на довольно распространненом RGB контроллере  ITE 8291 (rev 0.03). 
lsusb выдает idVendor:048d и idProduct:6006, обращаю внимание, что это важно , т.к. на нескольких проектах github, умеющих управлять из linux этим контроллером, нужно править исходники и добавлять эти id(впрочем обычно это не сложно).
На github довольно много различных проектов, которые умеют обращаться к этому контроллеру - но мне больше всего понравился 
следующий:
[ite8291r3-ctl](https://github.com/pobrn/ite8291r3-ctl)
Да, это утилита коммандной строки, но зато у нее минимум зависимостей (python3 и pyusb(+libusb)) и богатый функционал!

из того, что мне понравилось: 
режим **ripple**:
> ite8291r3-ctl effect ripple -s 0 -b 20 -r 

От каждой нажатой клавиши расходятся разноцветная рябь.
Особо нужно отметить rежим **anim** - автор программы ite8291r3-ctl написал целый язык управления подсветкой - с помощью 
него можно указать как будет светиться каждая отдельная клавиша в матрице 6 x 16 в определенный момент времени или постоянно.
Я написал [отдельный файлик для этого режима - можете попробовать](https://gist.githubusercontent.com/lexaone/720bf057da56832de5a73b6c8ae28b5d/raw/7c6d925b5c022fbbf7caa139840c9630af7aea06/manjaro_lexa)- вдруг понравиться
команда 
> ite8291r3-ctl anim --f /home/lexa/anim/manjaro_lexa

Из неприятного - подсветка клавиш отключается после восстановление из sleep - это можно поправить с помощью [как описано здесь](https://askubuntu.com/questions/226278/run-script-on-wakeup). Чтобы не сильно мучиться - можете взять мой скрипт [отсюда](https://gist.github.com/lexaone/b66c455f03a231c474ebddc609026852)

### пока не работает, TODO
- Ни в каком режиме (ни с драйверами ни без) не работает кнопка отключения микрофона. 
- tuxedo-keyboard блокирует переключение подсветки по клавише F8 - нужно разбираться.
- пока не понял, как управлять led bar на переднем торце ноутбука - причем он периодически сам включается и от чего это зависит не понятно :)
